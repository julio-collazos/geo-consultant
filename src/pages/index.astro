---
import DefaultLayout from '@layouts/DefaultLayout.astro'
import Hero from '@components/Hero.astro'
import FeaturedProjects from '@components/FeaturedProjects.astro'
import FeaturedPosts from '@components/FeaturedPosts.astro'
import { Link } from 'accessible-astro-components'
import { Icon } from 'astro-icon/components'

const base = import.meta.env.BASE_URL.replace(/\/$/, '')
function withBase(href: string): string {
  if (href.startsWith('http') || href.startsWith('mailto:') || href.startsWith('#')) return href
  return base + (href.startsWith('/') ? href : '/' + href)
}
---

<DefaultLayout
  title="Geospatial Analysis & Environmental Intelligence"
  useTitleTemplate={false}
>
  <!-- Hero: headline + description + primary CTAs -->
  <Hero />

  <!-- Featured portfolio projects -->
  <FeaturedProjects title="Selected Projects" limit={3} />

  <!-- Recent blog posts -->
  <FeaturedPosts title="Recent Posts" limit={3} />

  <!-- Call to action -->
  <section class="my-16">
    <div class="container">
      <div class="cta-block">
        <div class="cta-content">
          <h2 class="text-4xl mb-4">Let's connect</h2>
          <p class="text-xl mb-8 max-w-xl">
            Whether you have a project in mind, a technical question, or just want to talk about
            geospatial data â€” I'm happy to hear from you.
          </p>
          <div class="flex flex-col gap-3 min-[500px]:flex-row">
            <Link href={withBase('/contact')} isButton type="primary" animateOnHover animationType="boop">
              <Icon aria-hidden="true" name="lucide:mail" size="1.5rem" />
              Get in touch
            </Link>
            <Link
              href="https://linkedin.com/in/julio-collazos"
              isExternal
              isButton
              type="secondary"
              animateOnHover
              animationType="boop"
            >
              <Icon aria-hidden="true" name="lucide:linkedin" size="1.5rem" />
              LinkedIn
            </Link>
          </div>
        </div>
      </div>
    </div>
  </section>
</DefaultLayout>

<style lang="scss">
  .about-intro {
    strong {
      color: var(--color-primary);
    }
  }

  .cta-block {
    border: 1px solid var(--border-color-subtle);
    border-radius: var(--radius-lg);
    padding: var(--space-xl);
    background: light-dark(
      color-mix(in srgb, var(--color-primary) 5%, white),
      color-mix(in srgb, var(--color-primary) 8%, var(--color-neutral-950))
    );
  }
</style>
